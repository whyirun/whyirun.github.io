<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.cdnfonts.com/css/cmu-serif" rel="stylesheet">
<title>Why I Run</title>
<style>
:root {
  --bg: #0a0a0a;
  --surface: #111111;
  --border: #1e1e1e;
  --text: #e8e8e8;
  --text-secondary: #a0a0a0;
  --text-muted: #555555;
  --section-label: #444444;
  --toolbar-h: 48px;
  --sidebar-w: 260px;
}

* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'CMU Serif', Georgia, 'Times New Roman', serif; background: var(--bg); color: var(--text); height: 100vh; overflow: hidden; display: flex; flex-direction: column; }

#toolbar { height: var(--toolbar-h); display: flex; align-items: center; padding: 0 20px; background: #000; color: #fff; gap: 16px; z-index: 100; flex-shrink: 0; }
#toolbar h1 { font-size: 15px; font-weight: 500; letter-spacing: 0.01em; }
#toolbar a { color: #666; font-size: 12px; text-decoration: none; transition: color 0.15s; }
#toolbar a:hover { color: #fff; }

#main { display: flex; flex: 1; overflow: hidden; }

#sidebar { width: var(--sidebar-w); background: var(--bg); border-right: 1px solid var(--border); display: flex; flex-direction: column; flex-shrink: 0; overflow-y: auto; padding: 8px 0; }
.sidebar-cat { padding: 12px 16px 4px; font-size: 9px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.1em; color: var(--section-label); }
.sidebar-item { padding: 8px 16px; font-size: 13px; line-height: 1.4; cursor: pointer; color: var(--text-secondary); border-left: 2px solid transparent; transition: all 0.1s; }
.sidebar-item:hover { background: #161616; color: var(--text); }
.sidebar-item.active { background: #1a1a1a; color: var(--text); border-left-color: #fff; }
.sidebar-item .item-num { color: var(--text-muted); margin-right: 6px; font-size: 11px; }

#detail { flex: 1; overflow-y: auto; }
#detail-inner { max-width: 780px; width: 100%; margin: 0 auto; padding: 40px 48px 80px; }

.detail-title { font-size: 22px; font-weight: 600; line-height: 1.3; color: var(--text); margin-bottom: 28px; padding-bottom: 16px; border-bottom: 1px solid var(--border); }
.detail-title .num { color: var(--text-muted); font-weight: 400; font-size: 18px; margin-right: 4px; }
.section-label { font-size: 9px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.1em; color: var(--section-label); margin-bottom: 8px; }
.detail-section { margin-bottom: 32px; }
.detail-section .content { font-size: 14px; line-height: 1.7; color: var(--text-secondary); }
.detail-section .content ul { padding-left: 20px; margin: 0; }
.detail-section .content ul li { margin-bottom: 6px; }
.detail-section .content p { margin-bottom: 10px; }
.detail-section.essay-section .content { color: var(--text); font-size: 15px; line-height: 1.75; }
.detail-section.raw-section { border-top: 1px solid var(--border); padding-top: 24px; }
.detail-section.raw-section .content { font-size: 12.5px; line-height: 1.65; color: var(--text-muted); }

::-webkit-scrollbar { width: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #222; border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: #444; }
</style>
</head>
<body>

<div id="toolbar">
  <h1>Why I Run</h1>
  <a href="index.html">View Visualization</a>
</div>

<div id="main">
  <div id="sidebar"></div>
  <div id="detail">
    <div id="detail-inner"></div>
  </div>
</div>

<script>
var CATEGORIES = [
  { id: 'intro', name: 'Introduction' },
  { id: 'core', name: 'Core' },
  { id: 'embodied', name: 'Embodied & Sensory' },
  { id: 'identity', name: 'Identity & Social' },
  { id: 'meaning', name: 'Meaning & Ethics' },
  { id: 'personal', name: 'Personal History' },
  { id: 'emerging', name: 'Emerging' },
  { id: 'simulation', name: 'Simulation of Life' }
];

var reasons = [];
var selectedId = null;

function getCatName(id) {
  for (var i = 0; i < CATEGORIES.length; i++) { if (CATEGORIES[i].id === id) return CATEGORIES[i].name; }
  return '';
}

function esc(s) { var d = document.createElement('div'); d.textContent = s; return d.innerHTML; }

function renderSidebar() {
  var el = document.getElementById('sidebar');
  el.innerHTML = '';
  var currentCat = null;
  for (var i = 0; i < reasons.length; i++) {
    var r = reasons[i];
    if (r.category !== currentCat) {
      currentCat = r.category;
      var cat = document.createElement('div');
      cat.className = 'sidebar-cat';
      cat.textContent = getCatName(r.category);
      el.appendChild(cat);
    }
    var item = document.createElement('div');
    item.className = 'sidebar-item' + (selectedId === r.id ? ' active' : '');
    item.innerHTML = '<span class="item-num">' + r.id + '.</span>' + esc(r.title);
    (function(id) { item.addEventListener('click', function() { selectReason(id); }); })(r.id);
    el.appendChild(item);
  }
}

function selectReason(id) {
  selectedId = id;
  renderSidebar();
  renderDetail();
}

function renderDetail() {
  var inner = document.getElementById('detail-inner');
  var r = null;
  for (var i = 0; i < reasons.length; i++) { if (reasons[i].id === selectedId) { r = reasons[i]; break; } }
  if (!r) { inner.innerHTML = ''; return; }

  var html = '<div class="detail-title"><span class="num">' + r.id + '.</span> ' + esc(r.title) + '</div>';

  if (r.bullets && r.bullets.length > 0) {
    html += '<div class="detail-section"><div class="section-label">Key Points</div><div class="content"><ul>';
    for (var b = 0; b < r.bullets.length; b++) { html += '<li>' + esc(r.bullets[b]) + '</li>'; }
    html += '</ul></div></div>';
  }

  if (r.essayText) {
    html += '<div class="detail-section essay-section"><div class="section-label">Essay</div><div class="content">';
    var ep = r.essayText.split('\n\n');
    for (var e = 0; e < ep.length; e++) { html += '<p>' + esc(ep[e]) + '</p>'; }
    html += '</div></div>';
  }

  if (r.rawText) {
    html += '<div class="detail-section raw-section"><div class="section-label">Original Transcript</div><div class="content">';
    var rp = r.rawText.split('\n\n');
    for (var p = 0; p < rp.length; p++) { html += '<p>' + esc(rp[p]) + '</p>'; }
    html += '</div></div>';
  }

  inner.innerHTML = html;
}

fetch('data.json').then(function(r) { return r.json(); }).then(function(data) {
  if (Array.isArray(data) && data.length > 0) {
    reasons = data;
    renderSidebar();
    selectReason(reasons[0].id);
  }
}).catch(function(e) { console.error('Failed to load data:', e); });
</script>
</body>
</html>
